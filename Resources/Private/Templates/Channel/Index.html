<f:layout name="Backend" />

<f:section name="Title">Channels</f:section>

<f:section name="Content">
	<div class="page-header">
		<h1>Channels</h1>
	</div>
	<table class="table table-striped">
		<thead>
			<tr>
				<th>Name</th>
				<th>Last fetch date</th>
				<th>Posts</th>
				<th></th>
			</tr>
		</thead>
		<tbody>
		<f:for each="{channels}" as="channel">
			<tr>
				<td>
					{channel.name}<br />
					<a href="{channel.url}">{channel.url}</a>
				</td>
				<td>
					<f:if condition="{channel.lastFetchDate}">
						<f:then>{channel.lastFetchDate -> f:format.date(format: 'Y-m-d H:i:s')}</f:then>
						<f:else><span class="label label-warning">never</span> Check this feed for warnings or errors in the log.</f:else>
					</f:if>
				</td>
				<td>
				<f:link.action action="index" controller="Item" arguments="{filter: {channel: channel}}"><span class="badge">{channel.items -> f:count()}</span></f:link.action>
				</td>
				<td>
					<f:link.action action="edit" arguments="{channel: channel}" class="btn btn-sm btn-default"><span class="glyphicon glyphicon-pencil"></span> Edit</f:link.action>
					<f:link.action action="delete" arguments="{channel: channel}" class="btn btn-sm btn-danger"><span class="glyphicon glyphicon-trash icon-white"></span> Delete</f:link.action>
				</td>
			</tr>
		</f:for>
		</tbody>
	</table>
	<p>
		<f:link.action action="new" class="btn btn-default"><span class="glyphicon glyphicon-plus-sign"></span> Create new channel</f:link.action>
	</p>
</f:section>
